<div>
    <!--
    <pre>{{ vm.setting | json }}</pre>
    <pre>{{ vm.mappings | json }}</pre>    
    -->

    <div class="umb-forms-mappings" ng-if="vm.mappings.length > 0 && vm.hubspotFields.length > 0">

        <div class="umb-forms-mapping-header">
            <div class="umb-forms-mapping-field -no-margin-left">Form Field</div>
            <div class="umb-forms-mapping-field">Hubspot Field</div>
            <div class="umb-forms-mapping-remove -no-margin-right"></div>
        </div>

        <div ng-repeat="mapping in vm.mappings">

            <div class="umb-forms-mapping">
                <div class="umb-forms-mapping-field">
                    <select class="-full-width"
                            ng-options="field.id as field.value for field in vm.fields"
                            ng-model="mapping.formField"
                            ng-change="vm.stringifyValue()">
                    </select>
                </div>

                <div class="umb-forms-mapping-field">
                    <select class="-full-width"
                            ng-options="field.value as field.name for field in vm.hubspotFields track by field.value"
                            ng-model="mapping.hubspotField"
                            ng-change="vm.stringifyValue()">
                    </select>
                </div>

                <div class="umb-forms-mapping-remove -no-margin-right">
                    <a href="" ng-click="vm.deleteMapping($index)"><i class="icon-trash"></i></a>
                </div>
            </div>

            <div ng-if="mapping.hubspotField" style="margin-bottom:15px;">
                <strong>Description:</strong><br/>
                {{ vm.getHubspotFieldDescription(mapping.hubspotField) }}
            </div>
        </div>
    </div>

    <umb-button type="button" action="vm.addMapping()" label="Add mapping"></umb-button>

</div>